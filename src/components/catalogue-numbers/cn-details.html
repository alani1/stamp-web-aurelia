<template>
	<require from="../../value-converters/empty-text"></require>
	<require from="../../value-converters/as-currency"></require>
	<div class="panel panel-default" validate.bind="validation">
		<div class="panel-heading">
			<h4 class="panel-title">Active Catalogue Number</h4>
		</div>
		<div class="panel-body">
			<div class="form-group form-group-sm">
				<label for="cn-catalogueRef" class="col-sm-3 control-label">Catalogue</label>
				<div class="col-sm-9">
					<select id="cn-catalogueRef" disabled.bind="loading" validate="catalogueRef" class="catalogue-selector form-control" value.bind="model.catalogueRef">
						<option model.bind="-1">Select a catalogue</option>
						<option repeat.for="catalogue of catalogues" model.bind="catalogue.id">${catalogue.issue} - ${catalogue.name}</option>
					</select>
				</div>
			</div>
			<div class="form-group form-group-sm">
				<label for="cn-condition" class="col-sm-3 control-label">Condition</label>
				<div class="col-sm-4">
					<select id="cn-condition" class="condition-selector form-control" value.bind="model.condition">
						<option repeat.for="c of conditions" model.bind="c.ordinal">${c.description}</option>
					</select>
				</div>
			</div>
			<div class="form-group form-group-sm has-feedback">
				<label for="cn-number" class="col-sm-3 control-label">Number</label>
				<div class="col-sm-3">
					<input type="text" class="form-control" id="cn-number" validate="number" value.bind="model.number" aria-describedby="inputNumberStatus">
				</div>
				<div class="col-sm-1 packed-col">
					<span title.bind="conflictMessage" class="control-label sw-conversion ${icon}" click.trigger="convert()" disabled.bind="conversionModel !== undefined"></span>
                    <audio id="sw-exist-sound">
                        <source src="resources/sound/ring.ogg" type="audio/ogg">
                        <source src="resources/sound/ring.mp3" type="audio/mpeg">
                    </audio>
				</div>
                <span id="inputNumberStatus" class="sr-only"></span>
			</div>
			<div class="form-group form-group-sm">
				<label for="cn-value" class="col-sm-3 control-label"  disabled.bind="model.unknown">Value</label>
				<div class="col-sm-2">
					<input type="text" class="form-control" id="cn-value" disabled.bind="model.unknown" value.bind="model.value" >
				</div>
				<div class="col-sm-2 packed-col">
					<div class="sw-currency-label control-label" innerhtml="${selectedCatalogue | asCurrency:'code'}"></div>
				</div>
			</div>
			<div class="checkbox">
				<span class="col-sm-3"></span>
                <label class="col-sm-9">
                    <input type="checkbox" checked.bind="model.unknown">
                    <span>No value listed</span>
                </label>
			</div>
			<div class="checkbox">
				<span class="col-sm-3"></span>
                <label class="col-sm-9">
					<input type="checkbox" checked.bind="model.nospace">
					<span>No album space available</span>
				</label>
			</div>
		</div>
	</div>
</template>
